<section class="py-16 bg-gray-50 min-h-screen">
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-5xl">

    <!-- Page Header -->
    <div class="text-center mb-14">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
        Hire a Virtual Assistant
      </h1>
      <p class="text-xl text-gray-600">
        Tell us your requirements and weâ€™ll match you with the right assistant
      </p>
    </div>

    {{#if success}}
      <!-- Success Message -->
      <div class="bg-white rounded-2xl p-10 shadow-lg text-center">
        <div class="w-20 h-20 mx-auto mb-6 bg-green-500 rounded-full flex items-center justify-center">
          <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
          </svg>
        </div>
        <h2 class="text-3xl font-bold mb-4">Request Submitted!</h2>
        <p class="text-gray-600 mb-6">
          Thank you, {{booking.customerName}}. Our team will contact you shortly.
        </p>
        <a href="/" class="btn-primary">Back to Home</a>
      </div>
    {{else}}

    <!-- Booking Form -->
    <form
      action="/booking"
      method="POST"
      class="bg-white rounded-2xl p-10 shadow-xl"
      x-data="{ step: 1 }"
    >

      <!-- Step Indicators -->
      <div class="flex justify-between mb-10 text-sm text-gray-500">
        <span :class="step >= 1 ? 'text-purple-600 font-semibold' : ''">Service</span>
        <span :class="step >= 2 ? 'text-purple-600 font-semibold' : ''">Work Scope</span>
        <span :class="step >= 3 ? 'text-purple-600 font-semibold' : ''">Schedule</span>
        <span :class="step >= 4 ? 'text-purple-600 font-semibold' : ''">Contact</span>
      </div>

      <!-- STEP 1 -->
      <div x-show="step === 1">
        <h2 class="text-2xl font-bold mb-6">Select Service</h2>

        <label class="block text-sm font-semibold mb-2">Service *</label>
        <select
          name="service"
          id="serviceSelect"
          required
          class="w-full px-4 py-3 rounded-xl border border-gray-300 bg-white text-gray-900 focus:ring-2 focus:ring-purple-500"
        >
          <option value="">Select a service</option>
          {{#each services}}
            <option value="{{title}}" data-id="{{id}}">
              {{title}}
            </option>
          {{/each}}
        </select>

        <input type="hidden" name="serviceId" id="serviceId">

        <label class="block text-sm font-semibold mt-4 mb-2">Package (Optional)</label>
        <select
          name="package"
          class="w-full px-4 py-3 rounded-xl border border-gray-300 bg-white"
        >
          <option value="">No Package</option>
          <option value="Silver">Silver</option>
          <option value="Gold">Gold</option>
          <option value="Platinum">Platinum</option>
        </select>

        <button type="button" @click="step = 2" class="btn-primary w-full mt-6">
          Continue
        </button>
      </div>

      <!-- STEP 2 -->
      <div x-show="step === 2">
        <h2 class="text-2xl font-bold mb-6">Work Scope</h2>

        <label class="block text-sm font-semibold mb-2">Describe Your Requirements *</label>
        <textarea
          name="notes"
          rows="4"
          required
          class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-purple-500"
          placeholder="Tasks, tools, working hours, expectations..."
        ></textarea>

        <div class="flex gap-4 mt-6">
          <button type="button" @click="step = 1" class="btn-secondary w-full">Back</button>
          <button type="button" @click="step = 3" class="btn-primary w-full">Continue</button>
        </div>
      </div>

      <!-- STEP 3 -->
      <div x-show="step === 3">
        <h2 class="text-2xl font-bold mb-6">Schedule</h2>

        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <label class="block text-sm font-semibold mb-2">Preferred Start Date *</label>
            <input
              type="date"
              name="preferredDate"
              required
              class="w-full px-4 py-3 rounded-xl border border-gray-300"
            >
          </div>

          <div>
            <label class="block text-sm font-semibold mb-2">Preferred Time *</label>
            <input
              type="time"
              name="preferredTime"
              required
              class="w-full px-4 py-3 rounded-xl border border-gray-300"
            >
          </div>
        </div>

        <div class="flex gap-4 mt-6">
          <button type="button" @click="step = 2" class="btn-secondary w-full">Back</button>
          <button type="button" @click="step = 4" class="btn-primary w-full">Continue</button>
        </div>
      </div>

      <!-- STEP 4 -->
      <div x-show="step === 4">
        <h2 class="text-2xl font-bold mb-6">Contact Information</h2>

        <div class="space-y-4">
          <input
            type="text"
            name="contactName"
            placeholder="Full Name *"
            required
            class="w-full px-4 py-3 rounded-xl border border-gray-300"
          >

          <input
            type="email"
            name="email"
            placeholder="Email *"
            required
            class="w-full px-4 py-3 rounded-xl border border-gray-300"
          >

          <input
            type="tel"
            name="phone"
            placeholder="Phone Number *"
            required
            class="w-full px-4 py-3 rounded-xl border border-gray-300"
          >
        </div>

        <div class="flex gap-4 mt-6">
          <button type="button" @click="step = 3" class="btn-secondary w-full">Back</button>
          <button type="submit" class="btn-primary w-full">Submit Request</button>
        </div>
      </div>

    </form>
    {{/if}}
  </div>
</section>

<!-- REQUIRED SCRIPT -->
<script>
  const serviceSelect = document.getElementById('serviceSelect');
  const serviceIdInput = document.getElementById('serviceId');

  serviceSelect?.addEventListener('change', function () {
    const option = this.options[this.selectedIndex];
    serviceIdInput.value = option.getAttribute('data-id') || '';
  });
</script>
